<html>
<head>
	<title>yui webgl module</title>

	<script src="http://yui.yahooapis.com/3.13.0/build/yui/yui-min.js"></script>
	<script src="../build/y3d/y3d.js"></script>
</head>
<body>
	<canvas id='y3d' height="600" width="1000"></canvas>

	<script>
	var distance = function(x0, y0, z0, x1, y1, z1) {
        var dx = x1-x0,
            dy = y1-y0,
            dz = z1-z0;

        return Math.sqrt(dx*dx + dy*dy + dz*dz);
    };


	YUI().use('y3d-anim', 'y3d-scene', 'y3d-camera', 'y3d-geometry-box', 'y3d-geometry-sphere', 'y3d-texture', function(Y) {
		var camera = new Y.Camera({
			position: {
				z: 10
			}
		});

		// camera.lookAt([0, 0, 0]);

		var scene = new Y.Scene({
			camera: camera,
			background: 'white'
		});

		var texture = new Y.Texture({
			imageUrl: 'images/grass.png'
		});

		var box = new Y.Box({
			texture: texture
		});		

		scene.add(box);

		var i = 0;

		var anim = new Y.WebGLAnim(scene, function() {
			i += 1;

			var r = distance(
						camera.get('position.x'),
						camera.get('position.y'),
						camera.get('position.z'),
						0,
						0,
						0
					),
					theta = -i * (Math.PI/180),
					phi = 90 * (Math.PI/180);

				var x = r * Math.sin(theta) * Math.cos(phi);
				var y = r * Math.sin(theta) * Math.sin(phi);
				var z = r * Math.cos(theta);

				// console.log('x', x);
				// console.log('y', y);
				// console.log('z', z);
				// console.log('r', r);
				// console.log('----');

				// camera.lookAt([y, x, -z]);


				//---

				var k = camera.get('rotation.y');
				// var j = box.get('rotation.y');

				// camera.set('rotation.y', k + 1);
				// box.set('rotation.y', j + 1);
		});

		new Y.TextureLoader({
			onLoad: function() {
				anim.start();
			},
			textures: [texture]
		});
	});
	</script>	
</body>
</html>