YUI.add("y3d-camera",function(e,t){e.Camera=e.Base.create("camera",e.y3d.Model,[],{initializer:function(){var t=this;e.on("keypress",e.bind(t._onKeyPress,t)),e.on("mousewheel",e.bind(t._onMouseWheel,t)),e.on("mousemove",e.bind(t._onMouseMove,t)),t.inverse=e.WebGLMatrix.mat4.create()},getInvertedMatrix:function(){var t=this,n=t.get("matrix"),r=t.inverse;return e.WebGLMatrix.mat4.set(n,r),e.WebGLMatrix.mat4.inverse(r),r},lookAt:function(t){var n=this,r=n.get("position"),i=[r.x,r.y,r.z],s=[0,1,0],o=e.WebGLMatrix.mat4.lookAt(i,t,s);e.WebGLMatrix.mat4.inverse(o),n.set("matrix",o)},_onKeyPress:function(e){var t=this,n=t.get("controls.keys"),r=n.distance,i=t.get("position"),s=i.x,o=i.y;switch(e.keyCode){case n.up:t.set("position.y",o+r);break;case n.right:t.set("position.x",s+r);break;case n.down:t.set("position.y",o-r);break;case n.left:t.set("position.x",s-r)}},_onMouseMove:function(e){var t=this;rotation=t.get("rotation");var n=e.clientX-(t.previousX||e.clientX);t.previousX=e.clientX,t.set("rotation.y",rotation.y+n*-0.1);var r=e.clientY-(t.previousY||e.clientY);t.previousY=e.clientY,t.set("rotation.x",rotation.x+r*-0.1)},_onMouseWheel:function(e){var t=this,n=t.get("controls.mouseWheelDistance"),r=t.get("position.z");r-=e.wheelDelta*n,t.set("position.z",r)}},{ATTRS:{controls:{value:{keys:{up:119,right:100,down:115,left:97,distance:.3},mouseWheelDistance:.1}}}})},"0.1",{requires:["event-key","event-mousewheel","y3d-model"]});
